(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{347:function(t,a,s){"use strict";s.r(a);var r=s(7),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" redux")]),t._v(" "),a("blockquote",[a("p",[t._v("Redux 是 JavaScript 应用的可预测状态容器，用来集中管理状态(数据)。\n特点：集中管理、可预测、易于测试、易于调试、强大的中间件机制满足你所有需求。\n注意：redux 是一个独立于 react 的库，可以配合任何 UI 库/框架来使用。")])]),t._v(" "),a("p",[t._v("2015 年由 facebook 推出")]),t._v(" "),a("p",[a("img",{attrs:{src:"import/images/redux-1.png",alt:"redux logo"}})]),t._v(" "),a("h2",{attrs:{id:"为什么要做状态管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要做状态管理"}},[t._v("#")]),t._v(" 为什么要做状态管理")]),t._v(" "),a("p",[t._v("因为项目中有很多组件要用到同一份数据,组件虽然可以通讯,但是传递过程很繁琐. 状态管理可以帮我们将公共数据集中管理起来.逻辑上更加简单")]),t._v(" "),a("p",[a("img",{attrs:{src:"import/images/reduxdiff.png",alt:"状态管理"}})]),t._v(" "),a("h2",{attrs:{id:"redux-三个核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-三个核心概念"}},[t._v("#")]),t._v(" redux 三个核心概念")]),t._v(" "),a("ul",[a("li",[t._v("Action（产品经理）：描述需求")]),t._v(" "),a("li",[t._v("Reducer（程序员）：具体的执行者")]),t._v(" "),a("li",[t._v("Store（项目经理）：管理数据并且是 Action 和 Reducer 的桥梁，将 Action 传递给 Reducer。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"import/images/reduxflow.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#action"}},[t._v("#")]),t._v(" action")]),t._v(" "),a("blockquote",[a("p",[t._v("action 本质是一个 js 对象")])]),t._v(" "),a("p",[t._v("作用：描述如何修改数据 => {type: '描述信息', 其他属性: 属性值}")]),t._v(" "),a("p",[t._v("action 相关的规范: 1. 至少有一个 type 属性,值是字符串 2. type 的字符串应该是大写的英文")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ADD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"reducer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reducer"}},[t._v("#")]),t._v(" reducer")]),t._v(" "),a("blockquote",[a("p",[t._v("reducer 本质是一个函数。")])]),t._v(" "),a("p",[t._v("作用：接收 action 和 state(store 中的数据), 对 state 进行修改，并返回新 state。")]),t._v(" "),a("p",[a("strong",[t._v("注意: reducer 可以接收到一个 state,但是直接修改这个 state 并不能改变 store 中的数据,store 中的数据是由 reducer 函数的返回值决定的")])]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reducer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state是store传递给reducer的数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// action是store传递给reducer的需求")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ADD'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//... 忽略其他")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default 必须写,而且是固定代码")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#store"}},[t._v("#")]),t._v(" store")]),t._v(" "),a("blockquote",[a("p",[t._v("作用: 存储数据以及调用 reducer 函数。")])]),t._v(" "),a("p",[t._v("一个应用程序只需要一个 store")]),t._v(" "),a("h4",{attrs:{id:"store-提供的-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#store-提供的-api"}},[t._v("#")]),t._v(" store 提供的 api")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("提供 dispatch 方法，调用则会导致 reducer 函数执行")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XXX'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("提供 getState 方法，返回当前 store 中存储的数据")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("提供 subscribe 方法，监听数据变化。")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当数据发生变化,这个回调被调用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);