<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP | 小王的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="logo.png">
    <meta name="description" content="小王的博客">
    
    <link rel="preload" href="/assets/css/0.styles.cc68c345.css" as="style"><link rel="preload" href="/assets/js/app.8d6e8c80.js" as="script"><link rel="preload" href="/assets/js/2.d1a10b95.js" as="script"><link rel="preload" href="/assets/js/21.b7b22c7e.js" as="script"><link rel="prefetch" href="/assets/js/10.078876b2.js"><link rel="prefetch" href="/assets/js/11.0d348b04.js"><link rel="prefetch" href="/assets/js/12.674ecd59.js"><link rel="prefetch" href="/assets/js/13.2cdcfa0f.js"><link rel="prefetch" href="/assets/js/14.7578ba3e.js"><link rel="prefetch" href="/assets/js/15.ed069ce5.js"><link rel="prefetch" href="/assets/js/16.0476bc39.js"><link rel="prefetch" href="/assets/js/17.ffbcbdbd.js"><link rel="prefetch" href="/assets/js/18.564accfd.js"><link rel="prefetch" href="/assets/js/19.0909a6e8.js"><link rel="prefetch" href="/assets/js/20.597bd687.js"><link rel="prefetch" href="/assets/js/22.e3bb53df.js"><link rel="prefetch" href="/assets/js/23.4040088c.js"><link rel="prefetch" href="/assets/js/24.888c00f7.js"><link rel="prefetch" href="/assets/js/25.bae0a4d4.js"><link rel="prefetch" href="/assets/js/26.b4839473.js"><link rel="prefetch" href="/assets/js/27.4c4ac2c9.js"><link rel="prefetch" href="/assets/js/28.6c49ccc3.js"><link rel="prefetch" href="/assets/js/29.51c04b02.js"><link rel="prefetch" href="/assets/js/3.59105492.js"><link rel="prefetch" href="/assets/js/30.61b3e3f7.js"><link rel="prefetch" href="/assets/js/31.e6c5d0ac.js"><link rel="prefetch" href="/assets/js/32.9f59f731.js"><link rel="prefetch" href="/assets/js/33.c57a674a.js"><link rel="prefetch" href="/assets/js/34.7b1d074b.js"><link rel="prefetch" href="/assets/js/35.41092fee.js"><link rel="prefetch" href="/assets/js/36.579a58ab.js"><link rel="prefetch" href="/assets/js/37.bb015b50.js"><link rel="prefetch" href="/assets/js/38.dd4347c1.js"><link rel="prefetch" href="/assets/js/39.682bbcb3.js"><link rel="prefetch" href="/assets/js/4.dcab0898.js"><link rel="prefetch" href="/assets/js/40.07e67951.js"><link rel="prefetch" href="/assets/js/41.653b5e32.js"><link rel="prefetch" href="/assets/js/42.cffbb347.js"><link rel="prefetch" href="/assets/js/43.688a94c9.js"><link rel="prefetch" href="/assets/js/44.42a52d40.js"><link rel="prefetch" href="/assets/js/45.5efaf9e2.js"><link rel="prefetch" href="/assets/js/46.fc11a50f.js"><link rel="prefetch" href="/assets/js/47.c54685cf.js"><link rel="prefetch" href="/assets/js/48.01b4bfa6.js"><link rel="prefetch" href="/assets/js/49.5341fdc9.js"><link rel="prefetch" href="/assets/js/5.9e5cbc4b.js"><link rel="prefetch" href="/assets/js/50.867d8e1a.js"><link rel="prefetch" href="/assets/js/51.7c7c986d.js"><link rel="prefetch" href="/assets/js/52.2e397db2.js"><link rel="prefetch" href="/assets/js/53.5790beaf.js"><link rel="prefetch" href="/assets/js/54.9d4c626a.js"><link rel="prefetch" href="/assets/js/55.19763e86.js"><link rel="prefetch" href="/assets/js/56.dd197ef7.js"><link rel="prefetch" href="/assets/js/57.667b5e2b.js"><link rel="prefetch" href="/assets/js/58.971bd997.js"><link rel="prefetch" href="/assets/js/59.1a5b48bb.js"><link rel="prefetch" href="/assets/js/6.28415204.js"><link rel="prefetch" href="/assets/js/60.e4ee51c1.js"><link rel="prefetch" href="/assets/js/61.c044fdf2.js"><link rel="prefetch" href="/assets/js/62.c6cf56f4.js"><link rel="prefetch" href="/assets/js/63.a381078e.js"><link rel="prefetch" href="/assets/js/64.76f59cd9.js"><link rel="prefetch" href="/assets/js/7.aa2959d8.js"><link rel="prefetch" href="/assets/js/8.55b74a1e.js"><link rel="prefetch" href="/assets/js/9.1809c38a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc68c345.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小王的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/index.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><!----> <span class="title" style="display:;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jlk-lebron/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1849806240878344" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/jlk-lebron/blog-img@main/PicGo/zms.jpg"> <div class="blogger-info"><h3>Lebron Jia</h3> <span>前端小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/docs/index.html" class="nav-link">首页</a></div><div class="nav-item"><a href="/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><!----> <span class="title" style="display:;">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jlk-lebron/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1849806240878344" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Important</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Node</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e61119/" class="sidebar-link">包管理工具</a></li><li><a href="/pages/f2d2bf/" class="sidebar-link">模块化</a></li><li><a href="/pages/1838f4/" class="sidebar-link">git版本控制工具</a></li><li><a href="/pages/c55f98/" aria-current="page" class="active sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#http抓包" class="sidebar-link">http抓包</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#创建-web-服务器" class="sidebar-link">创建 web 服务器</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#get-和-post-的区别" class="sidebar-link">GET 和 POST 的区别</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#get-和-post-使用场景" class="sidebar-link">GET 和 POST 使用场景</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#响应状态码" class="sidebar-link">响应状态码</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#获取请求查询字符串" class="sidebar-link">获取请求查询字符串</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#实现不同url响应不同的内容" class="sidebar-link">实现不同url响应不同的内容</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#搭建静态资源服务" class="sidebar-link">搭建静态资源服务</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#静态资源的mime类型" class="sidebar-link">静态资源的MIME类型</a></li><li class="sidebar-sub-header level2"><a href="/pages/c55f98/#获取post请求体参数" class="sidebar-link">获取post请求体参数</a></li></ul></li><li><a href="/pages/bbd6e3/" class="sidebar-link">NodeJS</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Node" title="分类" data-v-06225672>Node</a></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-05-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">HTTP<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="path路径模块"><a href="#path路径模块" class="header-anchor">#</a> path路径模块</h1> <div class="language-Plain extra-class"><pre class="language-plain"><code>const path = require('path')
</code></pre></div><p>常用的几个方法：</p> <ul><li><code>path.join([...paths]):</code> <code>path.join()</code> 方法会将所有给定的 <code>path</code> 片段连接到一起（使用平台特定的分隔符作为定界符），然后规范化生成的路径。</li> <li><code>path.resolve([...paths]): 生成规范化的路径</code>，并生成的路径会解析为绝对路径 。 如果没有传入 <code>path</code> 片段，则 <code>path.resolve()</code> 会返回当前工作目录的绝对路径 。</li> <li><code>path.extname(path)</code>: 获取文件的后缀</li> <li><code>path.dirname(path)</code>: 返回path路径的目录名</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> imgSrc <span class="token operator">=</span> <span class="token string">'c:/a/b/c/111.png'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>imgSrc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// c:/a/b/c</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>imgSrc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// .png</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">isAbsolute</span><span class="token punctuation">(</span>imgSrc<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> base <span class="token punctuation">}</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>imgSrc<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span> <span class="token comment">// 111.png</span>
</code></pre></div><h1 id="http-协议"><a href="#http-协议" class="header-anchor">#</a> HTTP 协议</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <ul><li><p>HTTP（hypertext transport protocol）协议也叫『超文本传输协议』</p> <blockquote><p><strong>HTTPS</strong>:超文本传输安全协议（<strong>Hypertext Transfer Protocol Secure</strong>）</p></blockquote></li> <li><p>它是客户端和web服务器数据传输的基础</p></li> <li><p>http协议是一种基于 TCP/IP 的应用层通信协议，这个协议详细规定了浏览器和万维网服务器之间互相通信的规则。</p></li></ul> <p>协议主要规定了两方面的内容</p> <ul><li>客户端(浏览器)向服务器发送数据，称之为『请求报文』</li> <li>服务器向客户端(浏览器)返回数据，称之为『响应报文』</li></ul> <p><strong>什么是服务器：</strong></p> <p>简单来说，可以提供某种服务的机器。</p> <h2 id="http抓包"><a href="#http抓包" class="header-anchor">#</a> http抓包</h2> <p>抓取网页的所有请求与响应，也就是咱们俗称的抓包。常用抓包工具：</p> <ul><li>安装fiddler等其他工具 (看效果就行)</li> <li>使用浏览器自带调试工具network</li></ul> <h3 id="请求报文"><a href="#请求报文" class="header-anchor">#</a> 请求报文</h3> <p>一个完整的http请求应该包含 <code>请求报文(Request)</code>和 <code>响应报文(Response)</code>两部分。</p> <p>HTTP 请求报文包括四部分</p> <ul><li>请求行</li> <li>请求头</li> <li>空行</li> <li>请求体（仅限于post请求）</li></ul> <div class="language-HTTP extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">http://127.0.0.1:5500/index.html</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">127.0.0.1:5500</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive</span></span>
<span class="token header"><span class="token header-name keyword">Pragma</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">no-cache</span></span>
<span class="token header"><span class="token header-name keyword">sec-ch-ua</span><span class="token punctuation">:</span> <span class="token header-value">&quot;Google Chrome&quot;;v=&quot;111&quot;, &quot;Not(A:Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;111&quot;</span></span>
<span class="token header"><span class="token header-name keyword">sec-ch-ua-mobile</span><span class="token punctuation">:</span> <span class="token header-value">?0</span></span>
<span class="token header"><span class="token header-name keyword">sec-ch-ua-platform</span><span class="token punctuation">:</span> <span class="token header-value">&quot;Windows&quot;</span></span>
<span class="token header"><span class="token header-name keyword">Upgrade-Insecure-Requests</span><span class="token punctuation">:</span> <span class="token header-value">1</span></span>
<span class="token header"><span class="token header-name keyword">User-Agent</span><span class="token punctuation">:</span> <span class="token header-value">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36</span></span>
<span class="token header"><span class="token header-name keyword">Accept</span><span class="token punctuation">:</span> <span class="token header-value">text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Site</span><span class="token punctuation">:</span> <span class="token header-value">none</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Mode</span><span class="token punctuation">:</span> <span class="token header-value">navigate</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-User</span><span class="token punctuation">:</span> <span class="token header-value">?1</span></span>
<span class="token header"><span class="token header-name keyword">Sec-Fetch-Dest</span><span class="token punctuation">:</span> <span class="token header-value">document</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Encoding</span><span class="token punctuation">:</span> <span class="token header-value">gzip, deflate, br</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Language</span><span class="token punctuation">:</span> <span class="token header-value">zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7</span></span>


</code></pre></div><ul><li><p>GET <a href="http://localhost:5000/index.html" target="_blank" rel="noopener noreferrer">http://localhost:5000/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> HTTP/1.1：</p> <ul><li>GET请求</li> <li>请求路径为<a href="http://localhost:5000/index.html" target="_blank" rel="noopener noreferrer">http://localhost:5000/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>协议是HTTP 1.1版本</li></ul></li> <li><p>Host: 127.0.0.1:5500：请求的主机名为localhost，端口号3000</p></li> <li><p>Connection: keep-alive：处理完这次请求后继续保持连接，可减少建立和关闭TCP连接的开销</p></li> <li><p>Pragma: no-cache：不缓存该资源。http 1.0的规定。为了兼容只支持 HTTP/1.0的客户端</p></li> <li><p>Cache-Control: no-cache： 不缓存该资源 。http 1.1的规定，优先级更高</p></li> <li><p>Upgrade-Insecure-Requests: 1：告诉服务器，支持优先选择发送 https请求，更加安全</p></li> <li><p>User-Agent: Mozilla/5.0 (Windows ...) ：告诉服务器当前浏览器和操作系统相关的信息。</p></li> <li><p>Accept: text/html：告诉服务器，当前客户端可以接收的文档类型。</p></li> <li><p>Accept-Encoding: gzip, deflate, br：告知服务器客户端支持的压缩格式。数据在网络上传递时，服务器会把数据压缩后再发送客户端</p></li> <li><p>Accept-Language: zh-CN,zh;q=0.9：告知服务端客户端可支持的语言</p></li></ul> <h3 id="响应报文"><a href="#响应报文" class="header-anchor">#</a> 响应报文</h3> <p>HTTP 响应报文也包括四个部分</p> <ul><li>响应行</li> <li>响应头</li> <li>空行</li> <li>响应体</li></ul> <div class="language-HTTP extra-class"><pre class="language-http"><code><span class="token response-status"><span class="token http-version property">HTTP/1.1</span> <span class="token status-code number">200</span> <span class="token reason-phrase string">OK</span></span>
<span class="token header"><span class="token header-name keyword">Accept-Ranges</span><span class="token punctuation">:</span> <span class="token header-value">bytes</span></span>
<span class="token header"><span class="token header-name keyword">Cache-Control</span><span class="token punctuation">:</span> <span class="token header-value">public, max-age=0</span></span>
<span class="token header"><span class="token header-name keyword">Last-Modified</span><span class="token punctuation">:</span> <span class="token header-value">Sun, 09 Apr 2023 12:50:37 GMT</span></span>
<span class="token header"><span class="token header-name keyword">ETag</span><span class="token punctuation">:</span> <span class="token header-value">W/&quot;137-187661186c3&quot;</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">text/html; charset=UTF-8</span></span>
<span class="token header"><span class="token header-name keyword">Content-Length</span><span class="token punctuation">:</span> <span class="token header-value">1804</span></span>
<span class="token header"><span class="token header-name keyword">Date</span><span class="token punctuation">:</span> <span class="token header-value">Sun, 09 Apr 2023 12:59:08 GMT</span></span>
<span class="token header"><span class="token header-name keyword">Connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive</span></span>
<span class="token header"><span class="token header-name keyword">Keep-Alive</span><span class="token punctuation">:</span> <span class="token header-value">timeout=5</span></span>

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;首页&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;你好世界&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><ul><li>HTTP/1.1 200 OK：协议是HTTP 1.1版本，响应状态码为200代表请求成功，状态码文本为200</li> <li>Accept-Ranges: bytes：告诉浏览器支持多线程下载，而不是重新开始下载</li> <li>Cache-Control: public, max-age=0：对所有静态资源进行缓存控制。max-age指定多久缓存一次，0表示不缓存。</li> <li>Last-Modified: Wed, 21 Mar 2018 13:13:13 GMT：这个资源最后一次被修改的日期和时间</li> <li>ETag: W/&quot;a9-16248b12b64&quot;：请求资源的标记/ID</li> <li>Content-Type: text/html; charset=UTF-8：返回响应体资源类型</li> <li>Content-Length: 1804：响应体的长度，单位字节</li> <li>Date: Thu, 22 Mar 2018 12:58:41 GMT：提供了日期的时间标志，标明响应报文是什么时间创建的</li></ul> <h2 id="创建-web-服务器"><a href="#创建-web-服务器" class="header-anchor">#</a> 创建 web 服务器</h2> <p>使用 nodejs 创建 HTTP 服务器</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 导入http模块，创建服务器</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>

<span class="token comment">// 2. 创建一个服务器对象</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3. 指定端口号，开启服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running at port 3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>request 是对请求的封装对象</li> <li>response 是对响应的封装对象</li></ul> <h3 id="获取请求信息"><a href="#获取请求信息" class="header-anchor">#</a> 获取请求信息</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取请求方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// </span>

<span class="token comment">// 获取http版本</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>httpVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取请求路径</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取请求头</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取请求体</span>
req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>URL(Uniform Resource Locator) :地址用于定位一个网络上的资源</p></blockquote> <h3 id="设置响应信息"><a href="#设置响应信息" class="header-anchor">#</a> 设置响应信息</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 设置响应状态码</span>
res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token comment">// 设置响应状态码对应的信息（不建议改）</span>
res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">'OK'</span>

<span class="token comment">// 设置响应头</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置响应体数据</span>
res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 结束请求</span>
res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <ol><li><p>在监听request事件中，最后一定要 <code>res.end()</code>结束响应。否则浏览器会挂起</p> <p>浏览器显示中文可能是乱码，需设置响应头Content-type告诉浏览器显示时所使用的内容类型，且要在 <code>res.end()</code>之前设置  ，这样浏览器会用对应的方式去解析</p></li></ol> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/plain;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> #响应为纯文本
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  #响应为html格式
</code></pre></div><h2 id="get-和-post-的区别"><a href="#get-和-post-的区别" class="header-anchor">#</a> GET 和 POST 的区别</h2> <p>GET 和 POST 是 HTTP 协议请求的两种方式</p> <ul><li><p>GET 主要用来获取数据, POST 主要用来提交数据</p></li> <li><p>get和post本质上都是属于tcp连接</p></li> <li><p>传参方式不一样：</p> <ul><li><p>get将参数附着在url后面传递，query String。 如 <code>http://127.0.0.1:3000/index.php?a=1&amp;b=2</code></p> <ul><li>post放在请求体（request body）中</li></ul></li></ul></li> <li><p>传递数据格式不一样</p> <ul><li>get只能传递普通文本数据，</li> <li>而post可以传递二进制数据（如：图片、视频、音频）</li></ul></li> <li><p>传参大小不一样</p> <ul><li>get请求在url传递的参数有长度限制，而post没有。get传参大小一般在4kb,因浏览器而异同，</li> <li>post请求基本没有限制</li></ul></li> <li><p>安全性</p> <ul><li>get没有post安全，因为get参数直接显示在url地址中，所以不能传递敏感数据</li></ul></li> <li><p>缓存</p> <ul><li>get请求浏览器会主动缓存，而post不会,除非主动设置</li> <li>get请求历史记录会保存在浏览历史记录，而post请求不会</li></ul></li></ul> <h2 id="get-和-post-使用场景"><a href="#get-和-post-使用场景" class="header-anchor">#</a> GET 和 POST 使用场景</h2> <p>GET 请求的情况</p> <ul><li>在地址栏直接输入 url 访问</li> <li>点击 a 连接</li> <li>link 标签引入 css</li> <li>script 标签引入 js</li> <li>img 标签引入 图片</li> <li>form 表单  <code>&lt;form method=&quot;get&quot;&gt;</code></li> <li>AJAX GET 请求</li></ul> <p>post 请求的情况</p> <ul><li>form 表单 <code>&lt;form method=&quot;POST&quot;&gt;</code></li> <li>AJAX  POST 请求</li></ul> <h2 id="响应状态码"><a href="#响应状态码" class="header-anchor">#</a> 响应状态码</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">响应状态码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>代表着http请求是否成功，还是失败等信息。</p> <p>状态码由三位数组构成：分为</p> <ul><li>1xx：信息性响应，表示服务器已接收请求，但需要客户端继续操作。</li> <li>2xx：成功响应，表示服务器已成功处理请求。</li> <li>3xx：重定向响应，表示需要客户端进一步操作以完成请求。</li> <li>4xx：客户端错误响应，表示客户端发送的请求有误或无法被处理。</li> <li>5xx：服务器错误响应，表示服务器无法完成请求或发生了错误。</li></ul> <p>常用的响应状态码：</p> <ul><li>200：请求成功，浏览器会把响应体内容（通常是html）显示在浏览器中；</li> <li>301：永久重定向，被请求的旧资源永久移除了（不可以访问了），将会跳转到一个新资源，搜索引擎在抓取新内容的同时也将旧的网址替换为重定向之后的网址；</li> <li>302：临时重定向，被请求的旧资源还在（仍然可以访问），但会临时跳转到一个新资源，搜索引擎会抓取新的内容而保存旧的网址；</li> <li>304：（Not Modified）请求资源未被修改，浏览器将会读取缓存；</li> <li>403：forbidden 禁止的</li> <li>404：请求的资源没有找到not found，说明客户端错误的请求了不存在的资源；</li> <li>500：请求资源找到了，但服务器内部出现了错误；</li></ul> <h2 id="获取请求查询字符串"><a href="#获取请求查询字符串" class="header-anchor">#</a> 获取请求查询字符串</h2> <p>get方式的请求参数，参数是追加在请求url地址?的后面  ，叫做查询字符串</p> <div class="language-Plain extra-class"><pre class="language-plain"><code>http://localhost:3000/getUser?id=66&amp;name=zhangsan
</code></pre></div><p>通过 <code>req.url</code>就可以获取上面路径信息，结果如下：</p> <div class="language-Plain extra-class"><pre class="language-plain"><code> /getUser?id=66&amp;name=zhangsan
</code></pre></div><p>不过上面路径 <code>/index</code>和参数 <code>name=zhangsan</code>是在一个字符串中，不便于获取参数，我们可以借助nodejs的内置url模块.</p> <h3 id="url模块"><a href="#url模块" class="header-anchor">#</a> url模块</h3> <p>作用：解析url路径中的相关信息</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 调用parse()方法解析url地址,设置true可以把参数初始化为json对象格式，否则是查询字符串格式</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面打印的结果：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>Url <span class="token punctuation">{</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">slashes</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">auth</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">'?id=66&amp;name=zhangsan'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'66'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/index?id=66&amp;name=zhangsan'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">'/index?id=66&amp;name=zhangsan'</span> 
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>重点掌握pathname和query两个属性。</p></blockquote> <h2 id="实现不同url响应不同的内容"><a href="#实现不同url响应不同的内容" class="header-anchor">#</a> 实现不同url响应不同的内容</h2> <ul><li>请求 / 或 /index，响应index内容</li> <li>请求 /login，响应login内容</li> <li>请求 /register，响应register内容</li> <li>上面都没有匹配到，响应404 not found</li></ul> <h2 id="搭建静态资源服务"><a href="#搭建静态资源服务" class="header-anchor">#</a> 搭建静态资源服务</h2> <p>实现的功能：</p> <ul><li>可以响应html的请求</li> <li>可以响应css的请求</li> <li>可以响应js的请求</li> <li>可以响应图片的请求</li></ul> <p>参考代码：</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 引入 http 内置模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">getMIME</span><span class="token punctuation">(</span><span class="token parameter">ext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mimes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token string">'text/css'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">js</span><span class="token operator">:</span> <span class="token string">'text/javascript'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">png</span><span class="token operator">:</span> <span class="token string">'image/png'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jpg</span><span class="token operator">:</span> <span class="token string">'image/jpeg'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mp3</span><span class="token operator">:</span> <span class="token string">'audio/mpeg'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mp4</span><span class="token operator">:</span> <span class="token string">'video/mp4'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'application/octet-stream'</span><span class="token punctuation">,</span> <span class="token comment">// 出现文件下载，浏览器默认情况</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> mimes<span class="token punctuation">[</span>ext<span class="token punctuation">]</span> <span class="token operator">||</span> mimes<span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. 创建服务</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> fullFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> pathname<span class="token punctuation">)</span>
  <span class="token keyword">let</span> ext <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>fullFilePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment">// 读文件</span>
  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fullFilePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token function">getMIME</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;404 not Found 找不到&lt;/h1&gt;'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token function">getMIME</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3. 监听端口</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running at port 8000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="静态资源的mime类型"><a href="#静态资源的mime类型" class="header-anchor">#</a> 静态资源的MIME类型</h2> <p>HTTP服务可以设置响应头Content-type来表示响应头的MIME类型。</p> <blockquote><p>媒体<strong>类型</strong>（通常称为Multipurpose Internet Mail Extensions 或<strong>MIME 类型</strong>）</p></blockquote> <div class="language-JSON extra-class"><pre class="language-json"><code> html<span class="token operator">:</span> 'text/html'<span class="token punctuation">,</span>
 css<span class="token operator">:</span> 'text/css'<span class="token punctuation">,</span>
 js<span class="token operator">:</span> 'text/javascript'<span class="token punctuation">,</span>
 png<span class="token operator">:</span> 'image/png'<span class="token punctuation">,</span>
 jpg<span class="token operator">:</span> 'image/jpeg'<span class="token punctuation">,</span>
 mp3<span class="token operator">:</span> 'audio/mpeg'<span class="token punctuation">,</span>
 mp4<span class="token operator">:</span> 'video/mp4'<span class="token punctuation">,</span>
 json<span class="token operator">:</span> 'application/json'<span class="token punctuation">,</span>
</code></pre></div><p>对于未知的资源类型，可以选择 <code>application/octet-stram</code>类型，浏览器遇到此类型时,会对响应体内容进行<strong>下载</strong>。</p> <h2 id="获取post请求体参数"><a href="#获取post请求体参数" class="header-anchor">#</a> 获取post请求体参数</h2> <p>与get请求不同的是，post传输的数据一般比get要大得多，所以服务端接收post请求体参数不是一次就可以获取的，通常需要多次。</p> <p>具体实现：</p> <ul><li>浏览器每传输一部分post数据(buffer)到服务器就会触发一次 req对象的data 事件，传输完毕后会触发req对象的end事件。此时才代表post数据传输完毕。</li> <li>所以我们可以监听req对象的<strong>data事件</strong>就可以获取每次传输的部分数据，最后在req对象的<strong>end事件</strong>中把数据进行合并即可。这样就可以获取完整的请求体数据了。</li></ul> <p>核心代码</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 导入http模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> questString <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span> <span class="token comment">// // 把查询字符串(a=1&amp;b=2)解析成一个对象</span>
<span class="token comment">// 2. 创建服务器对象</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取请求方式</span>
  <span class="token keyword">let</span> method <span class="token operator">=</span> req<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span>
  <span class="token comment">// 如果是get请求，则响应一个表单</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'register.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// post请求,由于post数据比较大，会分多次传输</span>
    <span class="token comment">// 每次传输部分数据会触发req的data事件</span>
    <span class="token comment">// 传输完毕后会触发req的end事件</span>
    <span class="token keyword">const</span> bigBuf <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// chunk：块，是一个buffer类型</span>
      bigBuf<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在这里将所有小chunk拼接在一起</span>
      <span class="token keyword">let</span> body <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>bigBuf<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 将字符串a=1&amp;b=2解析成一个对象形式： {a:1,b:2}</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> questString<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求体参数：'</span><span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'post请求'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 3. 指定端口号，开启服务区</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务已经启动了 端口号为3000'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="/Node/HTTP+协议+2ee9e3c2-742c-4ace-a8ce-248a260dada0/练习 899f96fc-0924-49ce-a796-b0ccdfe673d2.html">练习</a></p> <p><a href="/Node/HTTP+协议+2ee9e3c2-742c-4ace-a8ce-248a260dada0/随堂笔记 4605b9a1-2c9d-40ae-b1a7-446cdaed8d09.html">随堂笔记</a></p></div></div> <!----> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/1838f4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">git版本控制工具</div></a> <a href="/pages/bbd6e3/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">NodeJS</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/1838f4/" class="prev">git版本控制工具</a></span> <span class="next"><a href="/pages/bbd6e3/">NodeJS</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c190e1/"><div>
            函数进阶
            <!----></div></a> <span class="date">08-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/91cc90/"><div>
            react-router-dom
            <!----></div></a> <span class="date">08-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/9705e8/"><div>
            create-react-app
            <!----></div></a> <span class="date">08-19</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:16631085276@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/jlk-lebron" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Lebron Jia  | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8d6e8c80.js" defer></script><script src="/assets/js/2.d1a10b95.js" defer></script><script src="/assets/js/21.b7b22c7e.js" defer></script>
  </body>
</html>
